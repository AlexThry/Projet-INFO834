@defer (when getChatIsLoaded()) {
    <div class="h-screen flex flex-col w-full relative justify-between">
        <div class="sticky top-0 bg-white navbar justify-center h-20 z-10 shadow">
            <a class="font-bold text-xl">{{ correspondant.username }}</a>
        </div>
        <div class="mx-5 flex flex-col overflow-y-scroll pt-2">
            @for (message of messages; track message) {
                @if (message.sender_id == loggedUserId) {
                    <div class="chat chat-end">
                        <div class="chat-bubble bg-fuchsia-600 text-white">{{ message.content }}</div>
                    </div>
                }
                @else {
                    <div class="chat chat-start">
                        <div class="chat-bubble bg-fuchsia-800 text-white">{{ message.content }}</div>
                    </div>
                }
            }
        </div>
        <form #f="ngForm" (ngSubmit)="onSubmitMessage(f)" class=" flex bottom-2 align-middle w-full mb-2">
            <input ngModel type="text" name="message" id="message" class="mx-2 input w-full input-bordered" required>
            <button type="submit" class="btn mr-2 bg-fuchsia-600 text-white hover:bg-fuchsia-900">envoyer</button>
        </form>
    </div>
}
@placeholder {
    <div class="flex align-middle justify-center h-screen">
        <span class="loading loading-dots loading-lg"></span>
    </div>
}

